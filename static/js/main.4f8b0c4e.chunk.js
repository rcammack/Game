(this["webpackJsonpreact-tic-tac-toe"]=this["webpackJsonpreact-tic-tac-toe"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('["who would they push off a cliff","who would push them off a cliff","what would they get a tattoo of","how do they \'really\' spend their weekends","if they were on a date from hell, how would they get out of it","what are they terrible at","what are they great at","what should their catchphrase be","what film best represents their life","what can\'t they be trusted with","what is in the secret folder on their computer","who are their \'real\' parents","what do they complain about the most","if they were a D.J., what would their name be","what is their signature dish","if they were a professor, what would they teach","who would they choose to be their sidekick","what is their number one passion in life","which form of torture would make them confess everything","what is their biggest pet peeve","if you could change one thing about them, what would it be","what did they dream about last night","what is their worst nightmare","what is their embarrassing old online username","if they were on the front page of the newspaper, what would be the headline","describe how they would hug","if the world was ending, how would they spend their last day","what will their last words be","if they could time travel, where would they go","what one thing would they save from a fire","what is a terrible habit of theirs that they really need to work on","what are they most ashamed about","which disney character do they remind you of","what animal do they look like","if they were a god, what would they be the god of","what is their secert dream job","if there was a documentary film about them, what would it be called","what is something they\'ll never admit","what would you buy for this person","if they won one million dollars, what would they buy first"]')},16:function(e,t,s){e.exports=s(41)},40:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),o=s(12),r=s.n(o),i=s(2),l=s(3),u=s(6),c=s(5),h=s(4),p=s(9),m=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).state={value:n.props.judgeMode?n.props.players[0]:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(l.a)(s,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onClick(this.state.value),this.setState({value:this.props.judgeMode?this.props.players[0]:""})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,!this.props.judgeMode&&a.a.createElement("form",{className:"ui form",onSubmit:this.handleSubmit},a.a.createElement("div",{className:"field"},a.a.createElement("label",null,this.props.refresh&&a.a.createElement("i",{style:{display:"inline"},className:"blue redo icon",onClick:function(){return e.props.onQuestionRefresh()}}),"\xa0",this.props.question,":"),a.a.createElement("div",{className:"ui action input",style:{maxWidth:"500px"}},a.a.createElement("input",{className:"ui input",type:"text",placeholder:"answer",value:this.state.value,onChange:this.handleChange}),a.a.createElement("button",{className:"ui button",value:"Submit"},"Submit")))),this.props.judgeMode&&a.a.createElement("form",{className:"ui form",onSubmit:this.handleSubmit},a.a.createElement("label",{style:{marginTop:"10px",marginBottom:"10px"}},a.a.createElement("p",{style:{display:"inline",fontWeight:"bold"}},this.props.question,":"),"\xa0",a.a.createElement("p",{style:{display:"inline",fontWeight:"bold",color:"CornflowerBlue"}},this.props.answer)),a.a.createElement("div",{className:"inline fields"},a.a.createElement("div",{className:"field"},a.a.createElement("select",{className:"ui selection dropdown",value:this.state.value,onChange:this.handleChange},this.props.players.map((function(e){return a.a.createElement("option",{key:e,value:e},e)})))),a.a.createElement("div",{className:"field"},a.a.createElement("input",{className:"ui button",type:"submit",value:"Submit"})))))}}]),s}(a.a.Component),d=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(){return Object(i.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"createBoard",value:function(e){for(var t=[],s=0;s<e;s++){var n=[];n.push(this.renderSquare(s)),t.push(a.a.createElement("div",{key:s},n))}return t}},{key:"renderSquare",value:function(e){var t=this;return a.a.createElement("div",{style:{marginBottom:"10px"},key:e},(""===this.props.answers[e]&&!this.props.roundDone||this.props.judgeMode)&&a.a.createElement(m,{judgeMode:this.props.judgeMode,players:this.props.players,question:this.props.questions[e],answer:this.props.answers[e],onClick:function(s){return t.props.onClick(e,s)},onQuestionRefresh:function(){return t.props.onQuestionRefresh(e)},refresh:this.props.refresh}),(""!==this.props.answers[e]&&!this.props.judgeMode||this.props.roundDone&&!this.props.judgeMode)&&a.a.createElement("div",null,a.a.createElement("p",{style:{display:"inline"}},this.props.questions[e],":"),"\xa0",a.a.createElement("p",{style:{display:"inline",color:"CornflowerBlue"}},this.props.answers[e])))}},{key:"render",value:function(){return a.a.createElement("div",null,this.createBoard(this.props.blanks))}}]),s}(a.a.Component),g=s(1),b=s.n(g),y=s(13),f=function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var n;Object(i.a)(this,s),(n=t.call(this,e)).onMakeMove=function(e,t){if(n.state.backlog[n.userIndex]>0&&!n.state.answers[n.targetIndex][e]){var s=n.targetIndex;n.targetIndex++,n.targetIndex>=n.players.length&&(n.targetIndex=0);var a=n.players[n.targetIndex],o=!1;n.targetIndex===n.userIndex&&(o=!0),n.setState({target:a,roundDone:o}),n.props.pubnub.publish({message:{oldTargetIndex:s,index:e,answer:t,name:n.props.name,userIndex:n.userIndex},channel:n.props.gameChannel})}},n.onGuess=function(e,t){var s=n.state.answerers[n.userIndex][e],a=n.players.indexOf(s);n.props.pubnub.publish({message:{judge:n.players[n.userIndex],user:n.userIndex,answererIndex:a,correctGuess:s===t},channel:n.props.gameChannel})},n.onQuestionRefresh=function(e){var t=n.state.questionsList.indexOf(n.state.questions[e]),s=n.state.questionsList.indexOf(n.state.questions[n.state.questions.length-1]);s+1<n.state.questionsList.length&&n.props.pubnub.publish({message:{i:e,oldIndex:t,newIndex:s+1},channel:n.props.gameChannel})},n.onWin=function(e){var t=e.length>1?"Tie! Winners are ".concat(e.toString()):"".concat(e[0]," wins!");n.props.isRoomCreator?b.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"New Round?",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",cancelButtonColor:"#aaa",cancelButtonText:"Nope",confirmButtonText:"Yea!",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class",cancelButton:"button-class"}}).then((function(e){e.value?n.props.pubnub.publish({message:{reset:!0},channel:n.props.gameChannel}):n.props.pubnub.publish({message:{endGame:!0},channel:n.props.gameChannel})})):b.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Waiting for a new round...",confirmButtonColor:"rgb(208,33,41)",width:275,customClass:{heightAuto:!1,title:"title-class",popup:"popup-class",confirmButton:"button-class"}})},n.userIndex=n.props.players.indexOf(n.props.name),n.targetIndex=n.userIndex+1,n.targetIndex>=n.props.players.length&&(n.targetIndex=0);for(var a=n.props.players[n.targetIndex],o=n.props.occupants,r=n.props.occupants-1,l=[],u=[],c=0;c<o;c++){for(var h=[],p=[],m=0;m<r;m++)h.push(""),p.push("");l.push(h),u.push(p)}var d=[],g=[];return n.props.isRoomCreator&&(d=(g=n.shuffleQuestionsList()).slice(0,n.props.occupants-1),n.props.pubnub.publish({message:{questionsList:g,questions:d},channel:n.props.gameChannel})),n.state={target:a,scores:Array(n.props.occupants).fill(0),backlog:Array(n.props.occupants).fill(1),questionsList:g,questions:d,answers:l,answerers:u,roundDone:!1,judgeMode:!1},n.judgeCount=0,n.players=n.props.players,n.madeMove=!1,n}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,(function(t){if(t.message.questions&&e.setState({questionsList:t.message.questionsList,questions:t.message.questions}),t.message.newIndex)e.setState((function(e){var s=e.questionsList,n=e.questions;return s[t.message.oldIndex]=s[t.message.newIndex],s.splice(t.message.newIndex,1),n[t.message.i]=s[t.message.oldIndex],{questionsList:s,questions:n}}));else if(t.message.judge){e.madeMove=!1,e.judgeCount++;var s=[];e.setState((function(n){var a=n.scores;if(a[t.message.answererIndex]=a[t.message.answererIndex]+1,t.message.correctGuess&&(a[t.message.user]=a[t.message.user]+1),e.judgeCount===e.props.occupants){var o=Math.max.apply(Math,Object(p.a)(a));if(o>=e.props.winningScore)for(var r=0;r<a.length;r++)a[r]===o&&s.push(e.players[r])}return{scores:a,judgeMode:t.message.judge!==e.players[e.userIndex]&&n.judgeMode}})),0!==s.length?e.onWin(s):e.judgeCount===e.props.occupants&&e.newRound(!1)}else!t.message.reset&&t.message.name?(e.madeMove=!0,e.setState((function(s){var n=s.backlog,a=s.answers,o=s.answerers;a[t.message.oldTargetIndex][t.message.index]=""===t.message.answer?"no answer":t.message.answer,o[t.message.oldTargetIndex][t.message.index]=t.message.name,n[t.message.userIndex]=n[t.message.userIndex]<=0?0:n[t.message.userIndex]-1;var r=t.message.userIndex-1;r<0&&(r=e.players.length-1),t.message.oldTargetIndex!==r&&(n[r]=n[r]+1);var i=!1;return n.every((function(e){return 0===e}))&&(i=!0),console.log(a),{answers:a,answerers:o,backlog:n,judgeMode:s.judgeMode||i}}))):t.message.reset?(b.a.close(),e.newRound(!0)):t.message.endGame&&(b.a.close(),e.props.endGame())}))}},{key:"shuffleQuestionsList",value:function(){for(var e=Object(p.a)(y),t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*t),n=e[t];e[t]=e[s],e[s]=n}return e}},{key:"newRound",value:function(e){var t=this;this.judgeCount=0,this.madeMove=!1,this.players=this.players.reverse(),this.userIndex=this.players.indexOf(this.props.name),this.targetIndex=this.userIndex+1,this.targetIndex>=this.players.length&&(this.targetIndex=0);for(var s=this.players[this.targetIndex],n=this.props.occupants,a=this.props.occupants-1,o=[],r=[],i=0;i<n;i++){for(var l=[],u=[],c=0;c<a;c++)l.push(""),u.push("");o.push(l),r.push(u)}var h=this.state.questionsList.indexOf(this.state.questions[this.state.questions.length-1]),p=[];if(h+this.props.occupants<this.state.questionsList.length)p=this.state.questionsList.slice(h+1,h+this.props.occupants);else{p=this.state.questionsList.slice(h+1);for(var m=0;p.length<this.props.occupants-1;m++)p.push(this.state.questionsList[m])}this.setState((function(n){return{target:s,scores:e?Array(t.props.occupants).fill(0):n.scores.reverse(),backlog:Array(t.props.occupants).fill(1),questions:p,answers:o,answerers:r,roundDone:!1,judgeMode:!1}}))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("p",{style:{display:"inline",fontSize:"26px"}},this.props.name),"\xa0\xa0\xa0\xa0",a.a.createElement("p",{style:{display:"inline"}},"Score: ",this.state.scores[this.userIndex]),this.state.scores[this.userIndex]>=this.props.winningScore&&a.a.createElement("i",{className:"yellow trophy icon",style:{marginLeft:"10px"}}),"\xa0\xa0\xa0\xa0",a.a.createElement("p",{style:{display:"inline"}},"Backlog: ",this.state.backlog[this.userIndex])),!this.state.judgeMode&&a.a.createElement("div",null,a.a.createElement("p",{style:{fontSize:"20px",color:"Tomato",marginTop:"15px",marginBottom:"10px"}},"Target: ",this.state.target),(0!==this.state.backlog[this.userIndex]||!this.madeMove)&&a.a.createElement(d,{roundDone:this.state.roundDone,blanks:this.props.occupants-1,questions:this.state.questions,answers:this.state.answers[this.targetIndex],onClick:function(t,s){return e.onMakeMove(t,s)},judgeMode:this.state.judgeMode,players:this.players,onQuestionRefresh:function(t){return e.onQuestionRefresh(t)},refresh:this.props.isRoomCreator&&!this.madeMove}),0===this.state.backlog[this.userIndex]&&this.madeMove&&a.a.createElement("p",null,"waiting...")),this.state.judgeMode&&a.a.createElement("div",null,a.a.createElement("p",{style:{fontSize:"20px",color:"Tomato",marginTop:"30px",marginBottom:"10px"}},"Guess who wrote your fav answer"),a.a.createElement(d,{roundDone:!1,blanks:this.props.occupants-1,questions:this.state.questions,answers:this.state.answers[this.targetIndex],onClick:function(t,s){return e.onGuess(t,s)},judgeMode:this.state.judgeMode,players:this.players,refresh:!1})))}}]),s}(a.a.Component),w=s(14),v=s.n(w),C=s(15),x=s.n(C),I=(s(40),function(e){Object(c.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(i.a)(this,s),(n=t.call(this,e)).onCreate=function(e){var t;n.roomId=x.a.generate().substring(0,5),n.lobbyChannel="tictactoelobby--"+n.roomId,n.occupants=1,n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),b.a.fire({position:"top",input:"text",inputValue:null!==(t=window.localStorage.getItem("player"))&&void 0!==t?t:"",allowOutsideClick:!1,inputPlaceholder:"Enter your name",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class",cancelButton:"join-button-class"}}).then((function(e){if(e.value){var t=[];t.push(e.value),window.localStorage.setItem("player",e.value),n.setState({name:e.value,players:t,isRoomCreator:!0})}else n.pubnub.unsubscribe({channels:[n.lobbyChannel]}),n.roomId=null,n.lobbyChannel=null,n.occupants=0}))},n.onPressJoin=function(e){b.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class",cancelButton:"join-button-class"}}).then((function(e){e.value&&n.joinRoom(e.value)}))},n.joinRoom=function(e){var t;n.roomId=e,n.lobbyChannel="tictactoelobby--"+n.roomId,n.pubnub.subscribe({channels:[n.lobbyChannel],withPresence:!0}),b.a.fire({position:"top",input:"text",inputValue:null!==(t=window.localStorage.getItem("player"))&&void 0!==t?t:"",allowOutsideClick:!1,inputPlaceholder:"Enter your name",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!1,popup:"popup-class",confirmButton:"join-button-class",cancelButton:"join-button-class"}}).then((function(e){e.value?(window.localStorage.setItem("player",e.value),n.setState({name:e.value}),n.pubnub.publish({message:{name:e.value},channel:n.lobbyChannel})):n.pubnub.unsubscribe({channels:[n.lobbyChannel]})}))},n.onPressStart=function(e){if(null!=n.lobbyChannel){var t="tictactoegame--"+n.roomId;n.pubnub.publish({message:{start:!0,occupants:n.occupants,players:n.state.players,gameChannel:t,winningScore:n.state.winningScore},channel:n.lobbyChannel}),b.a.close()}},n.onPressRemove=function(e){n.occupants--;var t=!1;n.occupants<3&&(t=!0),n.pubnub.publish({message:{removedPlayer:e},channel:n.lobbyChannel}),n.setState((function(s){var n=s.players;return n.splice(s.players.indexOf(e),1),{startIsDisabled:t,players:n}}))},n.endGame=function(){n.pubnub.unsubscribe({channels:[n.lobbyChannel,n.state.gameChannel]}),n.occupants=0,n.lobbyChannel=null,n.roomId=null,n.setState({name:"",players:[],isPlaying:!1,isRoomCreator:!1,startIsDisabled:!0,gameChannel:null,winningScore:8})},n.handleChange=function(e){n.setState({winningScore:e.target.value})},n.pubnub=new v.a({publishKey:"pub-c-5a45de7f-2d49-4913-a215-3a91b54a312e",subscribeKey:"sub-c-065bec9c-9b29-11ea-8e71-f2b83ac9263d"}),n.state={name:"",players:[],isPlaying:!1,isRoomCreator:!1,startIsDisabled:!0,gameChannel:null,winningScore:8},n.occupants=0,n.lobbyChannel=null,n.roomId=null,n.pubnub.init(Object(u.a)(n)),n}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,(function(t){if(null!=t.message.name&&e.state.isRoomCreator&&!e.state.isPlaying&&!e.state.players.includes(t.message.name)){e.occupants++;var s=!0;e.occupants>2&&(s=!1),e.setState((function(e){var n=e.players;return n.push(t.message.name),{startIsDisabled:s,players:n}}))}t.message.start&&t.message.occupants>=3&&(t.message.players.includes(e.state.name)?(e.occupants=t.message.occupants,e.pubnub.subscribe({channels:[t.message.gameChannel],withPresence:!0}),e.setState({players:t.message.players,gameChannel:t.message.gameChannel,winningScore:t.message.winningScore})):e.pubnub.unsubscribe({channels:[e.lobbyChannel]})),t.message.removedPlayer&&t.message.removedPlayer===e.state.name&&(e.pubnub.unsubscribe({channels:[e.lobbyChannel]}),e.lobbyChannel=null,e.roomId=null,e.setState({name:"",gameChannel:null}))})),null!=this.state.gameChannel&&this.pubnub.getPresence(this.state.gameChannel,(function(t){"join"===t.action&&e.setState({isPlaying:!0})}))}},{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.state.gameChannel]})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,!this.state.isPlaying&&a.a.createElement("div",{className:"lobby"},a.a.createElement("h1",{style:{margin:"auto",marginBottom:"30px"}},a.a.createElement("div",{style:{display:"inline"}},"Truth Bomb "),a.a.createElement("i",{style:{display:"inline"},className:"bomb icon"})),this.roomId&&a.a.createElement("p",{style:{margin:"auto",marginBottom:"15px"}},"Share this room ID with your friends: ",this.roomId),a.a.createElement("div",{style:{margin:"auto"}},!this.roomId&&a.a.createElement("div",{className:"ui buttons"},a.a.createElement("button",{className:"ui button",style:{width:"90px"},onClick:function(t){return e.onCreate()}}," Create"),a.a.createElement("div",{className:"or"}),a.a.createElement("button",{className:"ui button",style:{width:"90px"},onClick:function(t){return e.onPressJoin()}}," Join")),this.roomId&&this.state.isRoomCreator&&a.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},a.a.createElement("label",null,"Points to win: "),a.a.createElement("select",{style:{marginBottom:"15px"},value:this.state.winningScore,onChange:this.handleChange},[2,5,8,10,15,20].map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))),a.a.createElement("br",null),a.a.createElement("button",{className:"ui button",style:{marginBottom:"15px"},disabled:this.state.startIsDisabled,onClick:function(t){return e.onPressStart()}}," Start"),this.state.players.map((function(t,s){return a.a.createElement("div",{style:{textAlign:"left"},key:s},t!==e.state.name&&a.a.createElement("i",{style:{display:"inline"},className:"red close icon",onClick:function(s){return e.onPressRemove(t)}}),a.a.createElement("p",{style:{display:"inline"}},t))}))),null!=this.roomId&&!this.state.isRoomCreator&&a.a.createElement("div",null,a.a.createElement("p",{style:{textAlign:"center"}},"Hi, ",this.state.name,"!"),a.a.createElement("p",{style:{textAlign:"center"}},"waiting for room creator to start...")))),this.state.isPlaying&&a.a.createElement(f,{pubnub:this.pubnub,gameChannel:this.state.gameChannel,name:this.state.name,players:this.state.players,occupants:this.occupants,isRoomCreator:this.state.isRoomCreator,endGame:this.endGame,winningScore:this.state.winningScore}))}}]),s}(n.Component));r.a.render(a.a.createElement(I,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.4f8b0c4e.chunk.js.map