(this["webpackJsonpreact-tic-tac-toe"]=this["webpackJsonpreact-tic-tac-toe"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('["who would they push off a cliff","who would push them off a cliff","what would they get a tattoo of","how do they \'really\' spend their weekends","if they were on a date from hell, how would they get out of it","what are they terrible at","what are they great at","what should their catchphrase be","what film best represents their life","what can\'t they be trusted with","what is in the secret folder on their computer","who are their \'real\' parents","what do they complain about the most","if they were a D.J., what would their name be","what is their signature dish","if they were a professor, what would they teach","who would they choose to be their sidekick","what is their number one passion in life","which form of torture would make them confess everything","what is their biggest pet peeve","if you could change one thing about them, what would it be","what did they dream about last night","what is their worst nightmare","what is their embarrassing old online username","if they were on the front page of the newspaper, what would be the headline","describe how they would hug","if the world was ending, how would they spend their last day","what will their last words be","if they could time travel, where would they go","what one thing would they save from a fire","what is a terrible habit of theirs that they really need to work on","what are they most ashamed about","which disney character do they remind you of","what animal do they look like","if they were a god, what would they be the god of","what is their secert dream job","if there was a documentary film about them, what would it be called","what is something they\'ll never admit","what would you buy for this person","if they won one million dollars, what would they buy first","if they were on a deserted island, what would they take with them","what is one class they would love to take","what one possession are they embarassed to have","if they were invisible where would they go","if they were in an olympic sport what would it be","if they were an expert in one subject, what would it be","if they had a super power what would it be ","if they owned a yacht, what would they name it","what 3 words come to mind when you think of them","if they could add a feature to their phone what would it be","what would they put on their ice cream","what is their favorite time of day","where is their ideal place to live","if they could live in any era, which would it be","what store would they never be caught dead in","what is their ideal location to be proposed to","if someone wrote a book about them, what would the title be","who would play them in a movie ","what do they need more of in their life","what would make them happy right now","if they could share one thing with the world, what would it be","what do they love about themselves","what advice would they give to their younger self","what does their ideal morning look like","when was the last time they truly felt alive","what is something they would love to learn","what can they do to better take care of themselves ","what do they want their legacy to be","what will be written on their tombstone","what is something that offends them","how do they recharge","what is their favorite food","what do they always forget","what is their favorite outdoor activity","what do they hate more than anything"]')},16:function(e,t,s){e.exports=s(41)},40:function(e,t,s){},41:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),o=s(12),i=s.n(o),r=s(2),l=s(3),u=s(6),h=s(5),c=s(4),p=s(9),d=function(e){Object(h.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={value:a.props.judgeMode?a.props.players[0]:""},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a}return Object(l.a)(s,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onClick(this.state.value),this.setState({value:this.props.judgeMode?this.props.players[0]:""})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,!this.props.judgeMode&&n.a.createElement("form",{className:"ui form",onSubmit:this.handleSubmit},n.a.createElement("div",{className:"field"},n.a.createElement("label",null,this.props.refresh&&n.a.createElement("i",{style:{display:"inline",color:"#40A4DB"},className:"redo icon",onClick:function(){return e.props.onQuestionRefresh()}}),"\xa0",this.props.question,":"),n.a.createElement("div",{className:"ui action input",style:{maxWidth:"500px"}},n.a.createElement("input",{className:"ui input",type:"text",placeholder:"answer",value:this.state.value,onChange:this.handleChange}),n.a.createElement("button",{className:"ui button",style:{backgroundColor:this.props.color},value:"Submit"},"Submit")))),this.props.judgeMode&&n.a.createElement("form",{className:"ui form",onSubmit:this.handleSubmit},n.a.createElement("label",{style:{marginTop:"10px",marginBottom:"10px"}},n.a.createElement("p",{style:{display:"inline",fontWeight:"bold"}},this.props.question,":"),"\xa0",n.a.createElement("p",{style:{display:"inline",fontWeight:"bold",color:"#40A4DB"}},this.props.answer)),n.a.createElement("div",{className:"inline fields"},n.a.createElement("div",{className:"field"},n.a.createElement("select",{className:"ui selection dropdown",value:this.state.value,onChange:this.handleChange},this.props.players.map((function(e){return n.a.createElement("option",{key:e,value:e},e)})))),n.a.createElement("div",{className:"field"},n.a.createElement("input",{className:"ui button",style:{backgroundColor:this.props.color},type:"submit",value:"Submit"})))))}}]),s}(n.a.Component),m=["#40A4DB","#33BEB8","#B2C225","#FECC30","#F9A228","#F6621F","#DB3838","#EE657A","#A363DA"],g=function(e){Object(h.a)(s,e);var t=Object(c.a)(s);function s(){return Object(r.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"createBoard",value:function(e){for(var t=[],s=0;s<e;s++){var a=[];a.push(this.renderSquare(s)),t.push(n.a.createElement("div",{key:s},a))}return t}},{key:"renderSquare",value:function(e){var t=this;return n.a.createElement("div",{style:{marginBottom:"10px"},key:e},(""===this.props.answers[e]&&!this.props.roundDone||this.props.judgeMode)&&n.a.createElement(d,{judgeMode:this.props.judgeMode,players:this.props.players,question:this.props.questions[e],answer:this.props.answers[e],onClick:function(s){return t.props.onClick(e,s)},onQuestionRefresh:function(){return t.props.onQuestionRefresh(e)},refresh:this.props.refresh,color:e>=0&&e<m.length?m[e]:"#dddddd"}),(""!==this.props.answers[e]&&!this.props.judgeMode||this.props.roundDone&&!this.props.judgeMode)&&n.a.createElement("div",null,n.a.createElement("p",{style:{display:"inline"}},this.props.questions[e],":"),"\xa0",n.a.createElement("p",{style:{display:"inline",color:"CornflowerBlue"}},this.props.answers[e])))}},{key:"render",value:function(){return n.a.createElement("div",null,this.createBoard(this.props.blanks))}}]),s}(n.a.Component),b=s(1),w=s.n(b),y=s(13),f=function(e){Object(h.a)(s,e);var t=Object(c.a)(s);function s(e){var a;Object(r.a)(this,s),(a=t.call(this,e)).onMakeMove=function(e,t){if(a.state.backlog[a.userIndex]>0&&!a.state.answers[a.targetIndex][e]){var s=a.targetIndex;a.targetIndex++,a.targetIndex>=a.players.length&&(a.targetIndex=0);var n=a.players[a.targetIndex],o=!1;a.targetIndex===a.userIndex&&(o=!0),a.setState({target:n,roundDone:o}),a.props.pubnub.publish({message:{oldTargetIndex:s,index:e,answer:t,name:a.props.name,userIndex:a.userIndex},channel:a.props.gameChannel})}},a.onGuess=function(e,t){var s=a.state.answerers[a.userIndex][e],n=a.players.indexOf(s);a.props.pubnub.publish({message:{judge:a.players[a.userIndex],user:a.userIndex,answererIndex:n,correctGuess:s===t},channel:a.props.gameChannel})},a.onQuestionRefresh=function(e){var t=a.state.questionsList.indexOf(a.state.questions[e]),s=a.state.questionsList.indexOf(a.state.questions[a.state.questions.length-1]);s+1<a.state.questionsList.length&&a.props.pubnub.publish({message:{i:e,oldIndex:t,newIndex:s+1},channel:a.props.gameChannel})},a.onWin=function(e){var t=e.length>1?"Tie! Winners are ".concat(e.join(", ")):"".concat(e[0]," wins!");a.props.isRoomCreator?w.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"New Round?",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",cancelButtonColor:"#aaa",cancelButtonText:"Nope",confirmButtonText:"Yea!",width:275,customClass:{heightAuto:!0,widthAuto:!0}}).then((function(e){e.value?a.props.pubnub.publish({message:{reset:!0},channel:a.props.gameChannel}):a.props.pubnub.publish({message:{endGame:!0},channel:a.props.gameChannel})})):w.a.fire({position:"top",allowOutsideClick:!1,title:t,text:"Waiting for room creator to start a new round...",confirmButtonColor:"rgb(208,33,41)",width:275,customClass:{heightAuto:!0,widthAuto:!0}})},a.userIndex=a.props.players.indexOf(a.props.name),a.targetIndex=a.userIndex+1,a.targetIndex>=a.props.players.length&&(a.targetIndex=0);for(var n=a.props.players[a.targetIndex],o=a.props.occupants,i=a.props.occupants-1,l=[],u=[],h=0;h<o;h++){for(var c=[],p=[],d=0;d<i;d++)c.push(""),p.push("");l.push(c),u.push(p)}var m=[],g=[];return a.props.isRoomCreator&&(m=(g=a.shuffleQuestionsList()).slice(0,a.props.occupants-1),a.props.pubnub.publish({message:{questionsList:g,questions:m},channel:a.props.gameChannel})),a.state={target:n,scores:Array(a.props.occupants).fill(0),backlog:Array(a.props.occupants).fill(1),questionsList:g,questions:m,answers:l,answerers:u,roundDone:!1,judgeMode:!1},a.judgeCount=0,a.players=a.props.players,a.madeMove=!1,a}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.pubnub.getMessage(this.props.gameChannel,(function(t){if(t.message.questions&&e.setState({questionsList:t.message.questionsList,questions:t.message.questions}),t.message.newIndex)e.setState((function(e){var s=e.questionsList,a=e.questions;return s[t.message.oldIndex]=s[t.message.newIndex],s.splice(t.message.newIndex,1),a[t.message.i]=s[t.message.oldIndex],{questionsList:s,questions:a}}));else if(t.message.judge){e.madeMove=!1,e.judgeCount++;var s=[];e.setState((function(a){var n=a.scores;if(n[t.message.answererIndex]=n[t.message.answererIndex]+1,t.message.correctGuess&&(n[t.message.user]=n[t.message.user]+1),e.judgeCount===e.props.occupants){var o=Math.max.apply(Math,Object(p.a)(n));if(o>=e.props.winningScore)for(var i=0;i<n.length;i++)n[i]===o&&s.push(e.players[i])}return{scores:n,judgeMode:t.message.judge!==e.players[e.userIndex]&&a.judgeMode}})),0!==s.length?e.onWin(s):e.judgeCount===e.props.occupants&&e.newRound(!1)}else!t.message.reset&&t.message.name?(e.madeMove=!0,e.setState((function(s){var a=s.backlog,n=s.answers,o=s.answerers;n[t.message.oldTargetIndex][t.message.index]=""===t.message.answer?"no answer":t.message.answer,o[t.message.oldTargetIndex][t.message.index]=t.message.name,a[t.message.userIndex]=a[t.message.userIndex]<=0?0:a[t.message.userIndex]-1;var i=t.message.userIndex-1;i<0&&(i=e.players.length-1),t.message.oldTargetIndex!==i&&(a[i]=a[i]+1);var r=!1;return a.every((function(e){return 0===e}))&&(r=!0),console.log(n),{answers:n,answerers:o,backlog:a,judgeMode:s.judgeMode||r}}))):t.message.reset?(w.a.close(),e.newRound(!0)):t.message.endGame&&(w.a.close(),e.props.endGame())})),this.props.isRoomCreator||this.props.pubnub.fetchMessages({channels:[this.props.gameChannel],count:1},(function(t,s){for(var a in console.log("last message was...",s),s.channels){var n=s.channels[a][0].message;n.questions&&(console.log("MISSED QUESTIONS PUBLISH"),e.setState({questionsList:n.questionsList,questions:n.questions}))}}))}},{key:"shuffleQuestionsList",value:function(){for(var e=Object(p.a)(y),t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*t),a=e[t];e[t]=e[s],e[s]=a}return e}},{key:"newRound",value:function(e){var t=this;this.judgeCount=0,this.madeMove=!1,this.players=this.players.reverse(),this.userIndex=this.players.indexOf(this.props.name),this.targetIndex=this.userIndex+1,this.targetIndex>=this.players.length&&(this.targetIndex=0);for(var s=this.players[this.targetIndex],a=this.props.occupants,n=this.props.occupants-1,o=[],i=[],r=0;r<a;r++){for(var l=[],u=[],h=0;h<n;h++)l.push(""),u.push("");o.push(l),i.push(u)}var c=this.state.questionsList.indexOf(this.state.questions[this.state.questions.length-1]),p=[];if(c+this.props.occupants<this.state.questionsList.length)p=this.state.questionsList.slice(c+1,c+this.props.occupants);else{p=this.state.questionsList.slice(c+1);for(var d=0;p.length<this.props.occupants-1;d++)p.push(this.state.questionsList[d])}this.setState((function(a){return{target:s,scores:e?Array(t.props.occupants).fill(0):a.scores.reverse(),backlog:Array(t.props.occupants).fill(1),questions:p,answers:o,answerers:i,roundDone:!1,judgeMode:!1}}))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("p",{style:{display:"inline",fontSize:"26px"}},this.props.name),"\xa0\xa0\xa0\xa0",n.a.createElement("p",{style:{display:"inline"}},"Score: ",this.state.scores[this.userIndex]),this.state.scores[this.userIndex]>=this.props.winningScore&&n.a.createElement("i",{className:"trophy icon",style:{marginLeft:"10px",color:"#FECC30"}}),"\xa0\xa0\xa0\xa0",n.a.createElement("p",{style:{display:"inline"}},"Backlog: ",this.state.backlog[this.userIndex])),!this.state.judgeMode&&n.a.createElement("div",null,n.a.createElement("p",{style:{fontSize:"20px",color:"#DB3838",marginTop:"15px",marginBottom:"10px"}},"Target: ",this.state.target),(0!==this.state.backlog[this.userIndex]||!this.madeMove)&&n.a.createElement(g,{roundDone:this.state.roundDone,blanks:this.props.occupants-1,questions:this.state.questions,answers:this.state.answers[this.targetIndex],onClick:function(t,s){return e.onMakeMove(t,s)},judgeMode:this.state.judgeMode,players:this.players,onQuestionRefresh:function(t){return e.onQuestionRefresh(t)},refresh:this.props.isRoomCreator&&!this.madeMove}),0===this.state.backlog[this.userIndex]&&this.madeMove&&n.a.createElement("p",null,"waiting...")),this.state.judgeMode&&n.a.createElement("div",null,n.a.createElement("p",{style:{fontSize:"20px",color:"#DB3838",marginTop:"30px",marginBottom:"10px"}},"Guess who wrote your fav answer"),n.a.createElement(g,{roundDone:!1,blanks:this.props.occupants-1,questions:this.state.questions,answers:this.state.answers[this.targetIndex],onClick:function(t,s){return e.onGuess(t,s)},judgeMode:this.state.judgeMode,players:this.players,refresh:!1})))}}]),s}(n.a.Component),v=s(14),C=s.n(v),x=s(15),I=s.n(x),E=(s(40),function(e){Object(h.a)(s,e);var t=Object(c.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).onCreate=function(e){var t;a.roomId=I.a.generate().substring(0,5),a.lobbyChannel="tictactoelobby--"+a.roomId,a.occupants=1,a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),w.a.fire({position:"top",input:"text",inputValue:null!==(t=window.localStorage.getItem("player"))&&void 0!==t?t:"",allowOutsideClick:!1,title:"Enter your name",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!0,widthAuto:!0}}).then((function(e){if(e.value){var t=[];t.push(e.value),window.localStorage.setItem("player",e.value),a.setState({name:e.value,players:t,isRoomCreator:!0})}else a.pubnub.unsubscribe({channels:[a.lobbyChannel]}),a.roomId=null,a.lobbyChannel=null,a.occupants=0}))},a.onPressJoin=function(e){w.a.fire({position:"top",input:"text",allowOutsideClick:!1,inputPlaceholder:"Enter the room id",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!0,widthAuto:!0}}).then((function(e){e.value&&a.joinRoom(e.value)}))},a.joinRoom=function(e){var t;a.roomId=e,a.lobbyChannel="tictactoelobby--"+a.roomId,a.pubnub.subscribe({channels:[a.lobbyChannel],withPresence:!0}),w.a.fire({position:"top",input:"text",title:"Enter your name",inputValue:null!==(t=window.localStorage.getItem("player"))&&void 0!==t?t:"",allowOutsideClick:!1,inputPlaceholder:"Enter your name",showCancelButton:!0,confirmButtonColor:"rgb(208,33,41)",confirmButtonText:"OK",width:275,padding:"0.7em",customClass:{heightAuto:!0,widthAuto:!0}}).then((function(e){e.value?(window.localStorage.setItem("player",e.value),a.setState({name:e.value}),a.pubnub.publish({message:{name:e.value},channel:a.lobbyChannel})):a.pubnub.unsubscribe({channels:[a.lobbyChannel]})}))},a.onPressStart=function(e){if(null!=a.lobbyChannel){a.loading=!0,a.setState({startIsDisabled:!0});var t="tictactoegame--"+a.roomId;a.pubnub.publish({message:{start:!0,occupants:a.occupants,players:a.state.players,gameChannel:t,winningScore:a.state.winningScore},channel:a.lobbyChannel}),w.a.close()}},a.onPressRemove=function(e){a.occupants--;var t=!1;a.occupants<3&&(t=!0),a.pubnub.publish({message:{removedPlayer:e},channel:a.lobbyChannel}),a.setState((function(s){var a=s.players;return a.splice(s.players.indexOf(e),1),{startIsDisabled:t,players:a}}))},a.endGame=function(){a.pubnub.unsubscribe({channels:[a.lobbyChannel,a.state.gameChannel]}),a.occupants=0,a.lobbyChannel=null,a.roomId=null,a.loading=!1,a.setState({name:"",players:[],isPlaying:!1,isRoomCreator:!1,startIsDisabled:!0,gameChannel:null,winningScore:8})},a.handleChange=function(e){a.setState({winningScore:e.target.value})},a.pubnub=new C.a({publishKey:"pub-c-5a45de7f-2d49-4913-a215-3a91b54a312e",subscribeKey:"sub-c-065bec9c-9b29-11ea-8e71-f2b83ac9263d"}),a.state={name:"",players:[],isPlaying:!1,isRoomCreator:!1,startIsDisabled:!0,gameChannel:null,winningScore:8},a.occupants=0,a.lobbyChannel=null,a.roomId=null,a.loading=!1,a.pubnub.init(Object(u.a)(a)),a.pubnub.addListener({message:function(e){console.log("listener: message in ",e.channel,e.message)}}),a}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(){var e=this;null!=this.lobbyChannel&&this.pubnub.getMessage(this.lobbyChannel,(function(t){if(null!=t.message.name&&e.state.isRoomCreator&&!e.state.isPlaying&&!e.state.players.includes(t.message.name)&&e.occupants<=10){e.occupants++;var s=!0;e.occupants>2&&(s=!1),e.setState((function(e){var a=e.players;return a.push(t.message.name),{startIsDisabled:s,players:a}}))}t.message.start&&t.message.occupants>=3&&t.message.occupants<=10&&(t.message.players.includes(e.state.name)?(e.occupants=t.message.occupants,e.pubnub.subscribe({channels:[t.message.gameChannel],withPresence:!0}),e.setState({players:t.message.players,gameChannel:t.message.gameChannel,winningScore:t.message.winningScore})):e.pubnub.unsubscribe({channels:[e.lobbyChannel]})),t.message.removedPlayer&&t.message.removedPlayer===e.state.name&&(e.pubnub.unsubscribe({channels:[e.lobbyChannel]}),e.lobbyChannel=null,e.roomId=null,e.setState({name:"",gameChannel:null}))})),null!=this.state.gameChannel&&this.pubnub.getPresence(this.state.gameChannel,(function(t){"join"===t.action&&(e.loading=!1,e.setState({isPlaying:!0}))}))}},{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:[this.lobbyChannel,this.state.gameChannel]})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,!this.state.isPlaying&&n.a.createElement("div",{className:"lobby"},n.a.createElement("h1",{style:{margin:"auto",marginBottom:"30px"}},n.a.createElement("div",{style:{display:"inline"}},"Truth Bomb "),n.a.createElement("i",{style:{display:"inline"},className:"bomb icon"})),this.roomId&&n.a.createElement("p",{style:{margin:"auto",marginBottom:"15px"}},"Share this room ID with your friends: ",this.roomId),n.a.createElement("div",{style:{margin:"auto"}},!this.roomId&&n.a.createElement("div",{className:"ui buttons"},n.a.createElement("button",{className:"ui button",style:{width:"90px"},onClick:function(t){return e.onCreate()}}," Create"),n.a.createElement("div",{className:"or"}),n.a.createElement("button",{className:"ui button",style:{width:"90px"},onClick:function(t){return e.onPressJoin()}}," Join")),this.roomId&&this.state.isRoomCreator&&n.a.createElement("div",{style:{margin:"auto",textAlign:"center"}},n.a.createElement("label",null,"Points to win: "),n.a.createElement("select",{style:{marginBottom:"15px"},value:this.state.winningScore,onChange:this.handleChange},[2,5,8,10,15,20].map((function(e){return n.a.createElement("option",{key:e,value:e},e)}))),n.a.createElement("br",null),n.a.createElement("button",{className:"ui button",style:{marginBottom:"15px"},disabled:this.state.startIsDisabled,onClick:function(t){return e.onPressStart()}},this.loading&&n.a.createElement("i",{className:"spinner loading icon",style:{margin:"auto"}}),!this.loading&&"Start"),this.state.players.map((function(t,s){return n.a.createElement("div",{style:{textAlign:"left"},key:s},t!==e.state.name&&n.a.createElement("i",{style:{display:"inline"},className:"red close icon",onClick:function(s){return e.onPressRemove(t)}}),n.a.createElement("p",{style:{display:"inline"}},t))}))),null!=this.roomId&&!this.state.isRoomCreator&&n.a.createElement("div",null,n.a.createElement("p",{style:{textAlign:"center"}},"Hi, ",this.state.name,"!"),n.a.createElement("p",{style:{textAlign:"center"}},"waiting for room creator to start...")))),this.state.isPlaying&&n.a.createElement(f,{pubnub:this.pubnub,gameChannel:this.state.gameChannel,name:this.state.name,players:this.state.players,occupants:this.occupants,isRoomCreator:this.state.isRoomCreator,endGame:this.endGame,winningScore:this.state.winningScore}))}}]),s}(a.Component));i.a.render(n.a.createElement(E,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.8b540156.chunk.js.map